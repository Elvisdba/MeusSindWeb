<ui:composition xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
    
    <h:head>
        <title>Permissão Departamento</title>
        <script type="text/javascript">
        </script>
    </h:head>
    <h:body class="divMenu">
        <f:subview id="header">
            <ui:include src="template.xhtml"/>
            <ui:include src="templateLinks.xhtml"/>
        </f:subview>
        <f:view>
            <h:form id="formPermissaoDepartamento">
                <c:set scope="request" var="object" value="${permissaoBean.permissaoDepartamento}"/>
                <center>
                    <div class="headerPanel">
                        <h:outputText value="Permissões por Departamento" styleClass="fontePanel" style="width: 100%;"/>
                    </div>
                    <br />
                    <div class="divMae divFundo" style="text-align: left; width: 750px">
                        <h:panelGrid columns="4">
                            <h:column>
                                <h:outputLabel value="Departamento: " styleClass="fontePadrao"/>
                                <h:selectOneMenu value="#{permissaoBean.idDepartamento}" style="margin-right: 20px">
                                    <a4j:ajax event="change" render="tbl,tbl2"/>
                                    <f:selectItems value="#{permissaoBean.listaDepartamentos}"/>
                                </h:selectOneMenu>
                            </h:column>


                            <h:column>
                                <h:outputLabel value="Nível: " styleClass="fontePadrao"/>
                                <h:selectOneMenu value="#{permissaoBean.idNivel}">
                                    <a4j:ajax event="change" render="tbl,tbl2"/>
                                    <f:selectItems value="#{permissaoBean.listaNiveis}"/>
                                </h:selectOneMenu>
                            </h:column>
                        </h:panelGrid>

                        <h:panelGrid columns="3">
                            <rich:panel>
                                <div style="overflow:auto; height:330px; width: 300px;">
                                    <h:outputLabel value="Permissões Disponíveis: " styleClass="fonteFranklinNegrito"/>
                                    <rich:dataTable var="linha" style="width:100%" id="tbl" value="#{permissaoBean.permissaoDisponivel}">
                                        <rich:column>
                                            <f:facet name="header">
                                                <h:outputText value="Sel."/>
                                            </f:facet>
                                            <h:selectBooleanCheckbox value="#{linha.argumento0}" />
                                        </rich:column>
                                        <rich:column>
                                            <f:facet name="header">
                                                <h:outputText value="Módulo"/>
                                            </f:facet>
                                            <h:outputText value="#{linha.argumento1.modulo.descricao}" />                                            
                                        </rich:column>
                                        <rich:column>
                                            <f:facet name="header">
                                                <h:outputText value="Rotina"/>
                                            </f:facet>
                                            <h:outputText value="#{linha.argumento1.rotina.rotina}"/>
                                        </rich:column>
                                        <rich:column>
                                            <f:facet name="header">
                                                <h:outputText value="Permissão"/>
                                            </f:facet>
                                            <h:outputText value="#{linha.argumento1.evento.descricao}"/>
                                        </rich:column>
                                    </rich:dataTable>
                                </div>
                            </rich:panel>   
                            <h:column>
                                <h:panelGrid>
                                    <a4j:commandLink styleClass="idNovo iLink" value="  Todas  " style="width: 100px;" action="#{permissaoBean.adicionarTodasPermissaoDpto}" id="idDPClick" render="tbl,tbl2" disabled="#{controleAcessoBean.botaoSalvar}"/>
                                </h:panelGrid>
                                <h:panelGrid>
                                    <a4j:commandLink styleClass="idNovo iLink" value="Adicionar" style="width: 100px;" action="#{permissaoBean.adicionarPermissaoDpto}" render="tbl,tbl2" disabled="#{controleAcessoBean.botaoSalvar}"/>
                                </h:panelGrid>
                                <h:panelGrid>
                                    <a4j:commandLink styleClass="idNovo iLink" value=" Remover " style="width: 100px;" action="#{permissaoBean.excluirPermissaoDepto}" render="tbl,tbl2" disabled="#{controleAcessoBean.botaoExcluir}"/>
                                </h:panelGrid>
                                <h:panelGrid>
                                    <a4j:commandLink styleClass="idNovo iLink" value="  Nenhum " style="width: 100px;" action="#{permissaoBean.excluirTodasPermissaoDepto}" render="tbl,tbl2" disabled="#{controleAcessoBean.botaoExcluir}"/>
                                </h:panelGrid>
                            </h:column>
                            <rich:panel>
                                <div style="overflow:auto; height:330px; width: 300px;">
                                    <h:outputLabel value="Permissões do Depto.: " styleClass="fonteFranklinNegrito"/>
                                    
                                    <rich:dataTable value="#{permissaoBean.permissaoAdicionada}" var="linha" style="width:100%" id="tbl2">

                                        <rich:column>
                                            <f:facet name="header">
                                                <h:outputText value="Sel."/>
                                            </f:facet>
                                            <h:selectBooleanCheckbox value="#{linha.argumento0}"/>
                                        </rich:column>

                                        <rich:column>
                                            <f:facet name="header">
                                                <h:outputText value="Módulo"/>
                                            </f:facet>
                                            <h:outputText value="#{linha.argumento1.modulo.descricao}"/>
                                        </rich:column>

                                        <rich:column>
                                            <f:facet name="header">
                                                <h:outputText value="Rotina"/>
                                            </f:facet>
                                            <h:outputText value="#{linha.argumento1.rotina.rotina}"/>
                                        </rich:column>

                                        <rich:column>
                                            <f:facet name="header">
                                                <h:outputText value="Permissão"/>
                                            </f:facet>
                                            <h:outputText value="#{linha.argumento1.evento.descricao}"/>
                                        </rich:column>
                                    </rich:dataTable>
                                </div>
                            </rich:panel>                            
                        </h:panelGrid>                 
                    </div>
                </center>
           
            </h:form>
        </f:view>
    </h:body>
</ui:composition>