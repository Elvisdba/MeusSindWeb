<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:a4j="http://richfaces.org/a4j"
                xmlns:rich="http://richfaces.org/rich"
                xmlns:c="http://java.sun.com/jsp/jstl/core">

    <h:head>
        <title>Pesquisa Categoria</title>
    </h:head>
    <h:body class="divMenu">
        <f:subview id="header">
            <ui:include src="template.xhtml"/>
            <ui:include src="templateLinks.xhtml"/>
        </f:subview>
        <f:view>
            <h:form id="formPesquisaDescontoServicoEmpresa">

                <center>
                    <div class="headerPanel">
                        <h:outputText value="Pesquisa Desconto Serviço Empresa" styleClass="fontePanel" style="width: 100%;"/>
                    </div>
                    <rich:panel styleClass="divMae divPainelModal">
                        <h:panelGrid columns="7">
                            <h:outputLabel for="idPesquisaNome" value="Pesquisa - Razão Social:" />
                            <h:inputText id="idPesquisaNome" value="#{descontoServicoEmpresaBean.descricaoPesquisaNome}" disabled="#{descontoServicoEmpresaBean.desabilitaPesquisaNome}">
                                <a4j:ajax event="blur" render="idPesquisaNome idPesquisaCNPJ" listener="#{descontoServicoEmpresaBean.tipoPesquisa}"/>
                            </h:inputText>
                            <h:outputLabel for="idPesquisaCNPJ" value="CNPJ: " />
                            <h:inputText id="idPesquisaCNPJ" value="#{descontoServicoEmpresaBean.descricaoPesquisaCNPJ}" class="cnpj" disabled="#{descontoServicoEmpresaBean.desabilitaPesquisaCNPJ}">
                                <a4j:ajax event="blur" render="idPesquisaCNPJ idPesquisaNome" listener="#{descontoServicoEmpresaBean.tipoPesquisa}"/>
                            </h:inputText>
                            <a4j:commandLink id="btnInicial" action="#{descontoServicoEmpresaBean.acaoPesquisaInicial}" value="Inicial" styleClass="idNovo iLink" render="tbl" />
                            <a4j:commandLink id="btnParcial" action="#{descontoServicoEmpresaBean.acaoPesquisaParcial}" value="Parcial" styleClass="idNovo iLink" render="tbl" />
                            <a4j:status><f:facet name="start"><h:graphicImage value="/Imagens/espere.gif" alt="Aguarde"/></f:facet></a4j:status>
                        </h:panelGrid>
                        <div style="overflow:auto; height: 530px;">
                            <rich:dataTable var="linha" value="#{descontoServicoEmpresaBean.listaDescontoServicoEmpresa}"  style="width:100%; margin-top: 10px;" id="tbl" styleClass="stable" >
                                <f:facet name="header">Empresas com desconto</f:facet>
                                <h:column>
                                    <f:facet name="header">ID</f:facet>
                                    <a4j:commandLink styleClass="underline-hover" value="#{linha.id}" action="#{descontoServicoEmpresaBean.editar(linha)}" render="idDescontoServicoEmpresa"/>
                                </h:column>
                                <h:column>
                                    <f:facet name="header">CNPJ</f:facet>
                                    <a4j:commandLink styleClass="underline-hover" value="#{linha.juridica.pessoa.documento}" action="#{descontoServicoEmpresaBean.editar(linha)}" />
                                </h:column>
                                <h:column>
                                    <f:facet name="header">Empresa</f:facet>
                                    <a4j:commandLink  styleClass="underline-hover" value="#{linha.juridica.pessoa.nome}" action="#{descontoServicoEmpresaBean.editar(linha)}" />
                                </h:column>
                                <h:column>
                                    <f:facet name="header">Serviço</f:facet>
                                    <a4j:commandLink styleClass="underline-hover" value="#{linha.servicos.descricao}" action="#{descontoServicoEmpresaBean.editar(linha)}" />
                                </h:column>
                                <h:column>
                                    <f:facet name="header">Desconto</f:facet>
                                    <a4j:commandLink styleClass="underline-hover" value="#{linha.desconto} %" action="#{descontoServicoEmpresaBean.editar(linha)}" />
                                </h:column>
                            </rich:dataTable>
                        </div>
                    </rich:panel>
                </center>
            </h:form>
        </f:view>
    </h:body>
</ui:composition>