<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui">

    <h:head>
        <title>Sindical - Menu Principal</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" charset="UTF-8"/>
        <link rel="shortcut icon" href="#{facesContext.externalContext.requestContextPath}/Imagens/favicon.ico"/>  
        <style type="text/css">
            .ui-widget-content .ui-inputfield{ padding: 8px!important;} 
            .ui-button { padding: 3px!important; }
            .ui-selectonemenu-label .ui-inputfield{}
            
            .column01{
                width: 15%;
                vertical-align: top;
            }
            
            .column02{
                width: 65%;
                vertical-align: top;
            }
            
            .column03{
                width: 20%;
                vertical-align: top;
            }
        </style>
    </h:head>
    <h:body>
        <!-- INICIA DIV wrap e main -->
        <div id="wrapx">
            <div id="mainx">
                <!-- INICIA DIV wrap e main -->  
                <f:subview id="header">
                    <ui:include src="templates/templatePrime.xhtml"/>
                </f:subview>
                <f:view>
                    <h:form id="formMenuPrincipal">
                        <p:panel style="border: 0px; margin: 0 auto; width: #{configuracaoBean.resolucao.tipoResolucao.tamanho}">
                            <p:menubar>
                                <p:submenu label="Segurança" icon="ui-icon-document" style="margin-right: 15px">
                                    <p:menuitem value="Usuários" action="#{chamadaPaginaBean.usuario}" />  
                                    <p:submenu label="Permissão" icon="ui-icon-contact">  
                                        <p:menuitem value="Perm. Departamento"      action="#{chamadaPaginaBean.permissaoDepartamento}" />
                                        <p:menuitem value="Módulo/Rotina"           action="#{chamadaPaginaBean.permissao}" />
                                        <p:menuitem value="Cadastro Simples"        action="#{chamadaPaginaBean.simples}" />
                                        <p:menuitem value="Rotina"                  action="#{chamadaPaginaBean.rotina}" />
                                        <p:menuitem value="Níveis"                  action="#{chamadaPaginaBean.nivel}" />
                                        <p:menuitem value="Filial Departamento"     action="#{chamadaPaginaBean.pagina('filialDepartamento')}" />
                                    </p:submenu>  
                                    <p:submenu label="Departamentos">  
                                        <p:menuitem value="Homologação" action="#{chamadaPaginaBean.pagina('configuracaoHomologacao')}" />
                                        <p:menuitem value="Social"      action="#{chamadaPaginaBean.pagina('configuracaoSocial')}" />
                                        <p:menuitem value="Financeiro"  action="#{chamadaPaginaBean.pagina('configuracaoFinanceiro')}" />
                                    </p:submenu>  
                                    <p:separator />  
                                    <p:menuitem value="Pesquisar Logs"              action="#{chamadaPaginaBean.pagina('pesquisaLog')}" title="Registro de atividades"  />
                                    <p:submenu label="Sistema" rendered="#{controleUsuarioBean.clienteString.equals('Rtools')}">
                                        <p:menuitem value="Configurações"       action="#{chamadaPaginaBean.pagina('configuracao')}" />                                            
                                    </p:submenu> 
                                    <p:submenu label="Ordem Serviço" rendered="#{controleUsuarioBean.clienteString.equals('Rtools')}"> 
                                        <p:menuitem value="Ordem Serviço"    />
                                        <p:menuitem value="Prioridade" />                                            
                                        <p:menuitem value="Status" />                                            
                                    </p:submenu>
                                    <p:menuitem value="Sair do Sistema" action="#{usuarioBean.sairSistema}" /> 
                                </p:submenu>
                                <p:submenu label="Departamentos" icon="ui-icon-document" style="margin-right: 15px">
                                    <p:menuitem value="Social"      action="#{chamadaPaginaBean.menuSocial}" />
                                    <p:menuitem value="Arrecadação" action="#{chamadaPaginaBean.menuArrecadacao}" actionListener="#{bloqueioRotinaBean.liberaRotinasBloqueadas}"/>
                                    <p:menuitem value="Financeiro"  action="#{chamadaPaginaBean.menuFinanceiro}" />
                                    <p:menuitem value="Homologação" action="#{chamadaPaginaBean.menuHomologacao}" actionListener="#{agendamentoBean.verificaNaoAtendidos}"/>
                                    <p:menuitem value="Academia"    action="#{chamadaPaginaBean.menuAcademia}" />
                                    <p:menuitem value="Escola"      action="#{chamadaPaginaBean.menuEscola}" />
                                    <p:menuitem value="Clube"       action="#{chamadaPaginaBean.menuClube}" />
                                    <p:menuitem value="Locadora"    action="#{chamadaPaginaBean.menuLocadora}" />
                                    <p:menuitem value="Atendimento" action="#{chamadaPaginaBean.menuAtendimento}" />
                                </p:submenu>
                                <p:submenu label="Sindicato" icon="ui-icon-document" style="margin-right: 15px">  
                                    <p:menuitem value="Registro Empresarial" action="#{chamadaPaginaBean.registroEmpresarial}" actionListener="#{registroEmpresarialBean.limparModulo()}"/>
                                    <p:menuitem value="Registro Filial"      action="#{chamadaPaginaBean.pagina('macFilial')}" />
                                    <p:menuitem value="Filial"               action="#{chamadaPaginaBean.pagina('filial')}" title="Especificar cidades da Filial após cadastrar"/>
                                    <p:menuitem value="Web Service - CNPJ"  action="#{chamadaPaginaBean.pagina('configuracaoCnpj')}" />
                                    <p:menuitem value="Registro Patronal"    action="#{chamadaPaginaBean.pagina('registroPatronal')}" />
                                    <p:menuitem value="Piso Salarial"        action="#{chamadaPaginaBean.pagina('pisoSalarial')}" />
                                </p:submenu>
                                <p:submenu label="Suporte" icon="ui-icon-document" style="margin-right: 15px">
                                    <p:menuitem value="Manual do Sistema" />
                                    <p:menuitem value="Envie sua Mensagem" />
                                </p:submenu>
                                <p:submenu label="Ferramentas" icon="ui-icon-document" style="margin-right: 15px">  
                                    <p:submenu label="Pessoa" icon="ui-icon-contact">
                                        <p:menuitem value="Física"                action="#{chamadaPaginaBean.pessoaFisica}"/>
                                        <p:menuitem value="Juridica"              action="#{chamadaPaginaBean.pessoaJuridica}"/>                                        
                                        <p:menuitem value="Tipo Documento"        action="#{chamadaPaginaBean.tipoDocumento}"/>
                                        <p:menuitem value="Cnae"                  action="#{chamadaPaginaBean.pagina('cnae')}"/>
                                        <p:menuitem value="Profissão"             action="#{chamadaPaginaBean.pagina('profissao')}"/>
                                        <p:menuitem value="Enviar E-Mails"        action="#{chamadaPaginaBean.enviarEmail}" rendered="false"/>
                                        <p:submenu label="Suporte">
                                            <p:menuitem value="Nacionalidade"         action="#{chamadaPaginaBean.paginaSimples('Nacionalidade', 'Nacionalidade')}"/>
                                        </p:submenu>
                                    </p:submenu>
                                    <p:submenu label="Endereço" icon="ui-icon-contact" style="margin-right: 15px">
                                        <p:menuitem value="Endereço"      action="#{chamadaPaginaBean.endereco}"/>
                                        <p:menuitem value="Bairro"        action="#{chamadaPaginaBean.paginaSimples('Bairro', 'Bairro')}"/>
                                        <p:menuitem value="Cidade"        action="#{chamadaPaginaBean.cidade}"/>
                                        <p:menuitem value="Logradouro"    action="#{chamadaPaginaBean.paginaSimples('Logradouro', 'Logradouro')}"/>
                                        <p:menuitem value="Descrição"     action="#{chamadaPaginaBean.paginaSimples('DescricaoEndereco', 'Descrição Endereço')}"/>
                                        <p:menuitem value="Tipo Endereço" action="#{chamadaPaginaBean.paginaSimples('TipoEndereco', 'Tipo Endereço')}"/>
                                    </p:submenu>
                                    <p:submenu label="Agenda" icon="ui-icon-document">  
                                        <p:menuitem value="Agenda Telefônica"            action="#{chamadaPaginaBean.pagina('agendaTelefone')}" actionListener="#{agendaTelefoneBean.putType('agendaTelefone')}" title="Cadastro"/>
                                        <p:menuitem value="Grupo Agenda"                 action="#{chamadaPaginaBean.grupoAgenda}"/>
                                        <p:menuitem value="Grupo Usuário"     action="#{chamadaPaginaBean.pagina('agendaGrupoUsuario')}" />
                                    </p:submenu>
                                    <p:menuitem icon="ui-icon ui-icon-mail-closed" value="Email" action="#{chamadaPaginaBean.pagina('email')}" />
                                    <p:submenu label="Relatórios" icon="ui-icon-document">  
                                        <p:menuitem value="Manutenção" action="#{chamadaPaginaBean.relatorio}"/>
                                        <p:menuitem value="Etiquetas" action="#{chamadaPaginaBean.pagina('etiquetas', 'sisEtiquetas')}"/>
                                    </p:submenu>
                                </p:submenu>
                            </p:menubar> 
                            
                            <h:outputLabel value="O Sindical está mudando pra você..." style="font-size: 25pt!important; float: left;  font-family: 'Cordia New'" rendered="false"/>

                            <h:panelGrid columns="3" columnClasses="column01, column02, column03" style="width: 100%">
                                <p:column>
                                    <p:panel>
                                        <center>
                                            <h:panelGrid>
                                                <h:outputText style="font-weight: bold" value="Agenda Telefônica" />
                                            </h:panelGrid>
                                        
                                            <p:commandLink action="#{chamadaPaginaBean.pagina('pesquisaAgendaTelefone','agendaTelefone')}" title="Pesquisa Agenda Telefônica" style="clear: both" actionListener="#{agendaTelefoneBean.putType('pesquisaAgendaTelefone')}">
                                                <h:graphicImage value="/Imagens/-icone-agenda-telefone.jpg" width="120" /><br />
                                            </p:commandLink>
                                            <h:column rendered="#{agendaNotificaoBean.listAniversariantes.size() > 0}">
                                                <p:commandLink onclick="PF('dlg_agenda_contato').show();">
                                                    Aniversariantes do mês
                                                    <h:graphicImage value="/Imagens/icon-birthday.png" width="16" /><br />
                                                </p:commandLink>
                                            </h:column>
                                        </center>
                                    </p:panel>
                                </p:column>

                                <p:column>
                                    <p:panel style="height: 50px">
                                        <!-- <p:poll interval="5" update="i_panel_poll" listener="# {polling.existeUsuarioSessao()}"/>  -->
                                        <h:panelGrid id="i_panel_poll" style="float: left">
                                            <h:outputLabel value="Sem Notificações" rendered="#{!notificacaoBean.habilitaNot}" style="font-size: 12pt; color: #dd3b58; font-weight: bold"/>
                                            <h:outputLabel value="Existem #{notificacaoBean.quantidadeMenu} notificações de cobrança para serem enviadas" rendered="#{notificacaoBean.habilitaNot}" styleClass="fonteExtratoTela" style="font-size: 12pt; color: #dd3b58; font-weight: bold"/>
                                            <br />
                                            <p:commandLink value="Clique aqui para enviar" action="#{notificacaoBean.enviarPeloMenu()}" rendered="#{notificacaoBean.habilitaNot}" styleClass="fontePadrao"/>
                                        </h:panelGrid>
                                    </p:panel>
                                    <br />
                                    <p:panel style="height: 80px" rendered="#{!emissaoGuiasBean.listHistoricoEmissaoGuias.isEmpty()}">
                                        <h:panelGrid  style="float: left">
                                            <h:outputLabel value="Existem guias geradas sem baixar" style="font-size: 12pt; color: #dd3b58; font-weight: bold"/>
                                            <br />
                                            <p:commandLink value="CLIQUE AQUI PARA BAIXAR OU EXCLUIR" onclick="PF('i_dlg_guias').show()"/>
                                        </h:panelGrid>
                                    </p:panel>

                                    <p:panel rendered="false">
                                        <h:outputText style="font-size: 16pt!important; color: red; text-decoration: underline;" value="Comunicado" />
                                        <br /><br />
                                        <h:outputText value="Por motivo de feriado Municipal na cidade de Ribeirão Preto no dia 20 de Janeiro, excepcionalmente atenderemos só urgências pelo telefone (16) 3443-3828.
                                                      Caso não seja urgente mandar e-mail para suporte@rtools.com.br que entraremos em contato quando retornarmos.
                                                      Retornaremos nossas atividades no dia 21 de Janeiro em horário normal pelo telefone (16) 3964-6117.
                                                      Agradecemos a Compreensão." style="font-size: 10pt!important"/>
                                        <br /><br />
                                        <h:outputText value="Qualquer problema técnico dentro deste horário enviar um email para  " style="font-size: 10pt!important"/>
                                        <h:outputLink value="mailto:suporte@rtools.com.br" style="font-weight: bold">suporte@rtools.com.br</h:outputLink>
                                        <h:outputText value=" sua solicitação será respondida após voltarmos." style="font-size: 10pt!important"/>
                                    </p:panel>
                                </p:column>

                                <p:column>
                                    <p:panel>
                                        <h:panelGrid>
                                            <h:outputText style="font-weight: bold" value="Meus principais Acessos" />
                                        </h:panelGrid>
                                        <br />
                                        <h:panelGrid style="text-align: left;">
                                            <c:forEach items="#{controleUsuarioBean.listaContador}" var="contadorAcesso">
                                                <h:commandLink value="#{contadorAcesso.rotina.rotina}" action="#{chamadaPaginaBean.chamadaGenerica(contadorAcesso.rotina.pagina)}" style="margin-bottom: 10px; font-size: 9pt" class="listaAcesso" />
                                                <br />
                                            </c:forEach>
                                        </h:panelGrid>
                                    </p:panel>
                                </p:column>
                            </h:panelGrid>                            
                        </p:panel>



                        <p:dialog widgetVar="dlg_agenda_contato" modal="true" footer="Felicite esta pessoa" width="600" height="400" resizable="false">
                            <f:facet name="header">
                                <h:panelGrid columns="2">
                                    <h:graphicImage value="/Imagens/icon-birthday.png" width="16" />
                                    <h:column>Aniversariantes</h:column>
                                </h:panelGrid>
                            </f:facet>
                            <p:dataTable var="agendaContato" value="#{agendaNotificaoBean.listAniversariantes}" paginator="true" rows="15">
                                <p:column headerText="Principal" width="80">
                                    #{agendaContato.agenda.nome}
                                </p:column>
                                <p:column headerText="Data" width="80">
                                    <h:outputLabel value="#{agendaContato.nascimentoString}" />
                                </p:column>
                                <p:column headerText="Aniversariante">
                                    #{agendaContato.contato}
                                </p:column>
                                <p:column headerText="Depto">
                                    #{agendaContato.departamento}
                                </p:column>
                                <p:column headerText="Email">
                                    <p:outputLabel value="#{agendaContato.email1}" title="#{agendaContato.email2}" />
                                </p:column>
                            </p:dataTable>                                
                        </p:dialog>

                        <p:dialog widgetVar="i_dlg_guias" header="Lista de Guias sem baixar" resizable="false" modal="true">
                            <h:column rendered="#{emissaoGuiasBean.listHistoricoEmissaoGuias != null}">
                                <p:dataTable value="#{emissaoGuiasBean.listHistoricoEmissaoGuias}" var="historicoEmissaoGuias" id="tbl" emptyMessage="Nenhuma guia encontrada!" style="width: 550px">
                                    <p:column headerText="Nome Pessoa">
                                        <h:outputText value="#{historicoEmissaoGuias.movimento.pessoa.nome}"/>
                                    </p:column>                                            
                                    <p:column headerText="Valor" style="text-align: center" width="100">
                                        <h:outputText value="R$ " style="float: left"/>
                                        <h:outputText value="#{historicoEmissaoGuias.movimento.valorBaixaString}" style="float: right"/>
                                    </p:column>                                            
                                    <p:column headerText="" style="text-align: center" width="40">
                                        <p:commandLink value="Baixar" type="submit" action="#{emissaoGuiasBean.baixarErrado(historicoEmissaoGuias)}" oncomplete="PF('i_dlg_guias').hide()" style="font-weight: bold"/>  
                                    </p:column>                                            
                                    <p:column headerText="" style="text-align: center" width="40">
                                        <p:commandLink value="Excluir" type="submit" action="#{emissaoGuiasBean.excluirErrado(historicoEmissaoGuias)}" oncomplete="PF('i_dlg_guias').hide()" style="font-weight: bold"/>  
                                    </p:column>
                                </p:dataTable>
                            </h:column>
                            <br /><br />
                            <p:commandButton value="Cancelar" type="button" styleClass="ui-confirmdialog-no" onclick="PF('i_dlg_guias').hide()" style="float: left" />
                        </p:dialog>
                    </h:form>
                </f:view>

                <!-- FINALIZA div wrap main -->
            </div>
        </div>
        <!-- FINALIZA div wrap main -->
        <div id="footerx">
            <f:subview id="footer">
                <ui:include src="templates/templateFooter.xhtml"/>
            </f:subview>
        </div>
    </h:body>
</html>