<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:a4j="http://richfaces.org/a4j"
                xmlns:rich="http://richfaces.org/rich"
                xmlns:c="http://java.sun.com/jsp/jstl/core">

    <h:head>
        <title>Homologação</title>
        <meta http-equiv="X-UA-Compatible" content="IE=9" />
    </h:head>
    <h:body class="divMenu">
        <f:subview id="header">
            <ui:include src="templates/template.xhtml"/>
            <ui:include src="templates/templateLinks.xhtml"/>
        </f:subview>
        <f:view>
            <h:form id="form_homologacao">
                <c:set scope="request" var="object" value="${homologacaoBean.agendamento}"/>
                <center>
                    <div class="headerPanel">
                        <h:outputText value="Homologação" styleClass="fontePanel" style="width: 100%;"/>
                    </div>
                    <h:column rendered="#{homologacaoBean.renderConcluir}" >
                        <div class="divMae divFundo" style="text-align: left; width: 900px;">
                            <h:panelGrid columns="6">
                                <h:outputText value="Data: " styleClass="fontePadrao"/>
                                <h:outputText value="#{homologacaoBean.agendamento.data}" styleClass="fontePadraoNegritoMedio border-radius bg-white padding" />
                                <h:outputText value="Horário: " styleClass="fontePadrao" />
                                <h:outputText value="#{homologacaoBean.agendamento.horarios.hora}" styleClass="fontePadraoNegritoMedio border-radius bg-white padding"/>
                            </h:panelGrid>
                            <br />
                            <h:panelGrid id="i_panel_1" columns="2" columnClasses="coluna1, coluna2" cellspacing="3">
                                <h:column>
                                    <h4 class="border-radius bg-white padding">FUNCIONÁRIO</h4>
                                </h:column>
                                <h:column>
                                </h:column>
                                <h:column>
                                    <h:outputText value="MOTIVO DEMISSÃO: " styleClass="fontePadraoVermelho"/>
                                </h:column>
                                <h:column>
                                    <h:selectOneMenu id="idMotivoDemissao" value="#{homologacaoBean.idMotivoDemissao}" >
                                        <a4j:ajax event="change" render="this"/>
                                        <f:selectItems value="#{homologacaoBean.listaMotivoDemissao}"/>
                                    </h:selectOneMenu>
                                    <h:outputText value="TIPO AVISO: " styleClass="fontePadraoVermelho margin-left-max"/>
                                    <h:selectOneMenu id="idTipoAviso" value="#{homologacaoBean.tipoAviso}" >
                                        <a4j:ajax event="change" render="this"/>
                                        <f:selectItem itemValue="false" itemLabel="Imediato"/>
                                        <f:selectItem itemValue="true"  itemLabel="Trabalhado"/>
                                    </h:selectOneMenu>
                                </h:column>
                                <h:column>
                                    <h:outputText value="CPF: " styleClass="fontePadrao"/>
                                </h:column>
                                <h:column>
                                    <h:inputText id="idCPF" value="#{homologacaoBean.fisica.pessoa.documento}" size="14" maxlength="14" class="cpf">
                                        <a4j:ajax event="blur" listener="#{homologacaoBean.pesquisarFuncionarioCPF}"/>
                                    </h:inputText>
                                </h:column>
                                <h:column>
                                    <h:outputText value="NOME: " styleClass="fontePadraoVermelho  margin-left-max"/>
                                </h:column>
                                <h:column>
                                    <h:inputText size="50" value="#{homologacaoBean.fisica.pessoa.nome}" styleClass="fontePadraoNegrito" onblur="upperCase(this);">
                                        <a4j:ajax event="blur" render="this"/>
                                    </h:inputText>
                                    <h:outputText value="NASCIMENTO: " styleClass="fontePadrao  margin-left-max"/>
                                    <h:inputText size="12" maxlength="10" onkeypress="mascara(this, data);" value="#{homologacaoBean.fisica.nascimento}" styleClass="fontePadraoNegrito">
                                        <a4j:ajax event="change" render="this"/>
                                    </h:inputText>
                                </h:column>
                                <h:column>
                                    <h:outputText value="CARTEIRA: " styleClass="fontePadrao"/>
                                </h:column>
                                <h:column>
                                    <h:inputText size="10" value="#{homologacaoBean.fisica.carteira}" styleClass="fontePadraoNegrito" onblur="upperCase(this);">
                                        <a4j:ajax event="change" render="this"/>
                                    </h:inputText>
                                    <h:outputText value="SÉRIE: " styleClass="fontePadrao  margin-left-max"/>
                                    <h:inputText size="15" maxlength="15" value="#{homologacaoBean.fisica.serie}" styleClass="fontePadraoNegrito" onblur="upperCase(this);">
                                        <a4j:ajax event="change" render="this"/>
                                    </h:inputText>
                                </h:column>
                                <h:column>
                                    <h:outputText value="SEXO: " styleClass="fontePadrao"/>
                                </h:column>
                                <h:column>
                                    <h:selectOneRadio id="idSexo" value="#{homologacaoBean.fisica.sexo}" styleClass="fontePadrao">
                                        <a4j:ajax event="change" render="this" />
                                        <f:selectItem itemValue="F" itemLabel="Feminino"/>
                                        <f:selectItem itemValue="M" itemLabel="Masculino"/>
                                    </h:selectOneRadio>                                    
                                </h:column>
                                <h:column>
                                    <!-- <a4j:commandLink id="btnFuncao" value="Função" styleClass="idSalvar iLink" onclick="modalOpcao('divProfissao');" />  -->
                                    <a4j:commandLink styleClass="idNovo iLink" value="Função" oncomplete="#{rich:component('form_homologacao:i_painel_profissao')}.show(); return false;"/>
                                </h:column>
                                <h:column>
                                    <h:inputText id="idFuncao" size="40" value="#{homologacaoBean.profissao.cbo} - #{homologacaoBean.profissao.profissao}" styleClass="fontePadraoNegrito" readonly="true">
                                        <a4j:ajax event="click" oncomplete="#{rich:component('form_homologacao:i_painel_profissao')}.show(); return false;" />
                                    </h:inputText>
                                    <h:outputText value="SETOR: " styleClass="fontePadrao margin-left-max"/>
                                    <h:inputText id="idSetor" size="20" value="#{homologacaoBean.pessoaEmpresa.setor}" styleClass="fontePadraoNegrito " onblur="upperCase(this);">
                                        <a4j:ajax event="change" render="this"/>
                                    </h:inputText>
                                </h:column>
                                <h:column>
                                    <h:outputText value="ADMISSÃO: " styleClass="fontePadrao"/>
                                </h:column>
                                <h:column>
                                    <h:inputText size="8" maxlength="10" class="data" value="#{homologacaoBean.pessoaEmpresa.admissao}" styleClass="fontePadraoNegrito">
                                        <a4j:ajax event="change" render="this"/>
                                    </h:inputText>
                                    <h:outputText value="DEMISSÃO: " styleClass="fontePadrao  margin-left-max"/>
                                    <h:inputText size="8" maxlength="10" class="data" value="#{homologacaoBean.pessoaEmpresa.demissao}" styleClass="fontePadraoNegrito">
                                        <a4j:ajax event="change" render="this"/>
                                    </h:inputText>
                                </h:column>
                                <h:column>
                                    <h4 class="border-radius bg-white padding  margin-top-med">EMPRESA</h4>
                                </h:column>
                                <h:column>
                                </h:column>                                
                                <h:column>                                
                                    <h:outputText value="EMPRESA: " styleClass="fontePadraoVermelho"/>
                                </h:column>                                
                                <h:column>                                
                                    <h:outputText value="#{homologacaoBean.juridica.pessoa.nome}" styleClass="fontePadraoNegrito"/>

                                    <h:outputText value="Telefone: " styleClass="fontePadrao" style="margin-left: 20px;"/>
                                    <h:outputText value="#{homologacaoBean.juridica.pessoa.telefone1} / #{homologacaoBean.juridica.pessoa.telefone2}" styleClass="fontePadraoNegrito"/>
                                </h:column>
                                <h:column>
                                    <h:outputText value="STATUS: " styleClass="fontePadrao"/>
                                </h:column>
                                <h:column>
                                    <h:outputText value="#{homologacaoBean.statusEmpresa}" styleClass="fontePadraoNegrito"/>
                                </h:column>
                                <h:column>
                                    <h:outputText value="ENDEREÇO: " styleClass="fontePadrao"/>                                    
                                </h:column>
                                <h:column>
                                    <h:outputText value="#{homologacaoBean.strEndereco}" styleClass="fontePadraoNegrito"/>
                                </h:column>
                                <h:column>
                                    <h:outputText value="ESCRITÓRIO: " styleClass="fontePadrao"/>
                                </h:column>
                                <h:column>
                                    <h:outputText value="#{homologacaoBean.juridica.contabilidade.pessoa.nome}" styleClass="fontePadraoNegrito"/>
                                </h:column>
                                <h:column>
                                    <h:outputText value="TELEFONE: " styleClass="fontePadrao"/>
                                </h:column>
                                <h:column>
                                    <h:outputText value="#{homologacaoBean.juridica.contabilidade.pessoa.telefone1} / #{homologacaoBean.juridica.contabilidade.pessoa.telefone2}" styleClass="fontePadraoNegrito"/>
                                </h:column>
                                <h:column>
                                    <h4 class="border-radius bg-white padding margin-top-med">CONTATO</h4>
                                </h:column>
                                <h:column>
                                </h:column>
                                <h:column>
                                    <h:outputText value="Contato: " styleClass="fontePadrao"/>
                                </h:column>                                
                                <h:column>
                                    <h:inputText value="#{homologacaoBean.agendamento.contato}" size="20" styleClass="fontePadraoNegrito" onblur="upperCase(this);">
                                        <a4j:ajax event="change" render="this"/>
                                    </h:inputText>
                                    <h:outputText value="E-mail: " styleClass="fontePadrao margin-left-max"/>
                                    <h:inputText value="#{homologacaoBean.agendamento.email}" size="20" styleClass="fontePadraoNegrito" onblur="lowerCase(this);">
                                        <a4j:ajax event="change" render="this"/>
                                    </h:inputText>
                                    <h:outputText value="Tel: " styleClass="fontePadrao margin-left-max"/>
                                    <h:inputText value="#{homologacaoBean.agendamento.telefone}" size="12" maxlength="14" class="telefone" styleClass="fontePadraoNegrito">
                                        <a4j:ajax event="change" render="this"/>
                                    </h:inputText>
                                </h:column>                                
                                <h:column>                                
                                    <h:outputText value="Observação " styleClass="fontePadrao" />
                                </h:column>                                
                                <h:column>                                
                                    <h:inputTextarea cols="70" rows="2" value="#{homologacaoBean.agendamento.observacao}" />
                                </h:column>                                
                            </h:panelGrid>
                            <h:panelGrid columns="4">
                                <a4j:commandLink styleClass="idPesquisar iLink" oncomplete="#{rich:component('form_homologacao:i_painel_mensagem')}.show(); return false;" value="Atualizar" action="#{homologacaoBean.salvar}" disabled="#{controleAcessoBean.botaoSalvar}" render="i_painel_mensagem"/>
                                <a4j:commandLink styleClass="idPesquisar iLink" style="width: 120px;" oncomplete="#{rich:component('form_homologacao:i_painel_mensagem')}.show(); return false;" value="Homologar" action="#{homologacaoBean.homologar}" disabled="#{controleAcessoBean.botaoSalvar}" rendered="#{homologacaoBean.renderHomologar}" render="i_painel_mensagem"/>
                                <h:commandLink styleClass="idPesquisar iLink" style="width: 220px;" value="Cancelar Homologação" action="#{homologacaoBean.cancelarHorario}" rendered="#{homologacaoBean.renderCancelarHorario}" disabled="#{controleAcessoBean.botaoExcluir}"/>
                                <a4j:commandLink styleClass="idPesquisar iLink" style="width: 150px;" oncomplete="#{rich:component('form_homologacao:i_painel_mensagem')}.show(); return false;" value="Excluir Senha" action="#{homologacaoBean.excluirSenha()}" rendered="#{homologacaoBean.registro.senhaHomologacao}" disabled="#{controleAcessoBean.botaoExcluir}" render="i_painel_mensagem"/>
                            </h:panelGrid>
                        </div>
                    </h:column>
                    <div style="overflow:auto; height:600px; margin-top: 15px; margin-left: 35px;">
                        <h:column rendered="#{homologacaoBean.renderHomologacao}">
                            <h:panelGrid columns="5">
                                <h:outputLabel value="Data: " styleClass="fontePadrao"/>
                                <h:column>
                                    <a4j:outputPanel id="calendar" layout="block">
                                        <rich:calendar value="#{homologacaoBean.data}" datePattern="dd/MM/yyyy" >
                                            <a4j:ajax event="change" render="tbl"/>
                                        </rich:calendar>
                                    </a4j:outputPanel>
                                </h:column>
                                <h:outputLabel value="Status: " styleClass="fontePadrao" style="margin-left: 20px;"/>
                                <h:selectOneMenu id="idStatus" value="#{homologacaoBean.idStatus}">
                                    <a4j:ajax event="change" render="tbl"/>
                                    <f:selectItems value="#{homologacaoBean.listaStatus}"/>
                                </h:selectOneMenu>
                                <h:outputLabel value="#{homologacaoBean.msgHomologacao}" styleClass="corErro"/>
                            </h:panelGrid>
                            <br />
                            <a4j:poll id="poolMonitor" interval="5000" render="poolMonitor, tbl" />
                            <h:panelGrid columns="1">
                                <rich:dataTable value="#{homologacaoBean.listaHorarios}" var="linha" style="width: 95%;"  id="tbl" onrowmouseover="this.style.backgroundColor='#F1F1F1'" iterationStatusVar="it"
                                                onrowmouseout="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'">
                                    <rich:column style="text-align: center;">
                                        <f:facet name="header">
                                            <h:outputText value="#"/>
                                        </f:facet>
                                        <h:outputText value="#{it.index}"/>
                                    </rich:column> 

                                    <rich:column styleClass="coluna">
                                        <f:facet name="header">
                                            <h:outputText value="Horarios" rendered="false"/>
                                            <h:graphicImage value="/Imagens/horario.png" alt="Horário" title="Horário" width="20" />
                                        </f:facet>
                                        <a4j:commandLink id="linkHorario" action="#{homologacaoBean.agendar}" value="#{linha.argumento0.hora}" rendered="#{!linha.argumento15}">
                                            <a4j:param value="#{it.index}" assignTo="#{homologacaoBean.idIndex}" />
                                        </a4j:commandLink>
                                        <h:outputLabel value="#{linha.argumento0.hora}" rendered="#{linha.argumento15}" />
                                    </rich:column>

                                    <rich:column>
                                        <f:facet name="header">
                                            <h:outputText value="CNPJ"/>
                                        </f:facet>
                                        <div style="width: 100px">
                                            <h:outputText value="#{linha.argumento1}"/>
                                        </div>
                                    </rich:column>

                                    <rich:column>
                                        <f:facet name="header">
                                            <h:outputText value="Empresa"/>
                                        </f:facet>
                                        <h:outputText value="#{linha.argumento2}"/>
                                    </rich:column>

                                    <rich:column>
                                        <f:facet name="header">
                                            <h:outputText value="Funcionário"/>
                                        </f:facet>
                                        <div style="width: 200px">
                                            <h:outputText value="#{linha.argumento7.fisica.pessoa.nome}"/>
                                        </div>
                                    </rich:column>                                                 

                                    <rich:column>
                                        <f:facet name="header">
                                            <h:outputText value="Homologador"/>
                                        </f:facet>
                                        <h:outputText value="#{linha.argumento3}"/>
                                    </rich:column>

                                    <rich:column>
                                        <f:facet name="header">
                                            <h:outputText value="Contato"/>
                                        </f:facet>
                                        <h:outputText value="#{linha.argumento4}"/>
                                    </rich:column>

                                    <rich:column style="width: 80px;">
                                        <f:facet name="header">
                                            <h:outputText value="Telefone"/>
                                        </f:facet>
                                        <h:outputText value="#{linha.argumento5}"/>
                                    </rich:column>

                                    <rich:column>
                                        <f:facet name="header">
                                            <h:outputText value="Usuario"/>
                                        </f:facet>
                                        <h:outputText value="#{linha.argumento6}"/>
                                    </rich:column>
                                    
                                    <rich:column>
                                        <f:facet name="header">
                                            <h:outputText value="Senha"/>
                                        </f:facet>
                                        <h:outputText value="#{linha.argumento10}"/>
                                    </rich:column>
                                    
                                    <rich:column styleClass="coluna">
                                        <f:facet name="header">
                                            <h:graphicImage value="/Imagens/iconPrint.png" alt="Imprimir Protocolo" title="Imprimir Protocolo"/>
                                        </f:facet>
                                        <h:commandLink action="#{homologacaoBean.imprimirProtocolo(linha.argumento9.id)}" target="_blank" value="#{linha.argumento9.id}" title="Imprimir Protocolo" />
                                    </rich:column>

                                </rich:dataTable>
                                <h:commandLink styleClass="idPesquisar iLink margin-top-maior" style="width: 120px" value="Atendimento" action="#{homologacaoBean.atendimento()}" rendered="#{homologacaoBean.registro.senhaHomologacao}"/>
                            </h:panelGrid>
                        </h:column>
                    </div>
                </center>

                <!-- PESQUISAR PROFISSAO -->                                
                
                <rich:popupPanel id="i_painel_profissao" modal="true" resizeable="true" domElementAttachment="form" width="600" height="400">
                    <f:facet name="header">
                        <h:outputText value="Pesquisar"/>
                    </f:facet>
                    <f:facet name="controls">
                        <h:outputLink value="#" onclick="#{rich:component('form_homologacao:i_painel_profissao')}.hide(); return false;">
                            <h:graphicImage value="/Imagens/iconExcluir.png" alt="Fechar"/>                            
                        </h:outputLink>
                    </f:facet>
                    <center>
                        <h:panelGrid columns="6">
                            <h:outputLabel value="Profissão: " styleClass="fontePadrao"/>
                            <h:inputText id="idProf" size="20" value="#{homologacaoBean.profissao.profissao}" onkeypress="return event.keyCode !== 13;" />
                            <a4j:commandButton value="Inicial" action="#{homologacaoBean.inicial}" render="i_tbl_prof" status="i_status"/>
                            <a4j:commandButton value="Parcial" action="#{homologacaoBean.parcial}" render="i_tbl_prof" status="i_status"/>
                            <h:outputText value="Por: " styleClass="fontePadrao"/>
                            <h:selectOneMenu id="idPor" value="#{homologacaoBean.combo}" >
                                <f:selectItem itemValue="cbo" itemLabel="Cbo"/>
                                <f:selectItem itemValue="profissao"  itemLabel="Profissão"/>
                            </h:selectOneMenu>
                        </h:panelGrid>
                        <h:panelGrid columns="1" class="margin-top-maior">
                            <h:panelGroup style="overflow:auto; height:280px; width: 360px;"  layout="block">
                                <rich:dataTable var="linha" value="#{homologacaoBean.listaProfissao}" style="width:100%" id="i_tbl_prof">
                                    <rich:column style="text-align: center; width: 30px">
                                        <f:facet name="header">
                                            <h:outputText value="Id"/>
                                        </f:facet>
                                        <a4j:commandLink id="linkPro" action="#{homologacaoBean.editar(linha)}" value="#{linha.id}" render="idProf, idFuncao" oncomplete="#{rich:component('form_homologacao:i_painel_profissao')}.hide(); return false;" status="i_status" styleClass="underline-hover" />
                                    </rich:column>
                                    <rich:column style="text-align: center;">
                                        <f:facet name="header">
                                            <h:outputText value="Cbo"/>
                                        </f:facet>
                                        <a4j:commandLink action="#{homologacaoBean.editar(linha)}" value="#{linha.cbo}" render="idProf, idFuncao" oncomplete="#{rich:component('form_homologacao:i_painel_profissao')}.hide(); return false;" status="i_status" styleClass="underline-hover"/>
                                    </rich:column>
                                    <rich:column>
                                        <f:facet name="header">
                                            <h:outputText value="Profissão"/>
                                        </f:facet>
                                        <a4j:commandLink action="#{homologacaoBean.editar(linha)}" value="#{linha.profissao}" render="idProf, idFuncao" oncomplete="#{rich:component('form_homologacao:i_painel_profissao')}.hide(); return false;" status="i_status" styleClass="underline-hover"/>
                                    </rich:column>
                                </rich:dataTable>
                            </h:panelGroup>
                        </h:panelGrid>
                    </center>
                </rich:popupPanel>
                
                <!-- <div id="boxes">
                    <div id="divProfissao" class="window">
                        <a4j:commandLink styleClass="close closeModal" value="Fechar" title="Fechar"/>
                        <br />
                        <center>
                            <h:panelGrid columns="6">
                                <h:outputLabel value="Profissão: " styleClass="fontePadrao"/>
                                <h:inputText id="idProf" size="20" value="# {homologacaoBean.profissao.profissao}" onkeypress="return event.keyCode !== 13;"/>

                                <a4j:commandLink styleClass="idNovo iLink" value="Inicial" action="# {homologacaoBean.inicial}" render="tblProf"/>
                                <a4j:commandLink styleClass="idNovo iLink" value="Parcial" action="# {homologacaoBean.parcial}" render="tblProf"/>

                                <h:outputText value="Por: " styleClass="fontePadrao"/>
                                <h:selectOneMenu id="idPor" value="# {homologacaoBean.combo}" >
                                    <f:selectItem itemValue="cbo" itemLabel="Cbo"/>
                                    <f:selectItem itemValue="profissao"  itemLabel="Profissão"/>
                                </h:selectOneMenu>
                            </h:panelGrid>       

                            <h:panelGrid columns="1">
                                <h:panelGroup style="overflow:auto; height:280px; width: 360px;"  layout="block">
                                    <rich:dataTable var="linha" value="# {homologacaoBean.listaProfissao}" style="width:100%" iterationStatusVar="it" id="tblProf">
                                        <rich:column style="text-align: center;">
                                            <f:facet name="header">
                                                <h:outputText value="#"/>
                                            </f:facet>
                                            <h:outputText value="# {it.index}"/>
                                        </rich:column>

                                        <rich:column style="text-align: center;">
                                            <f:facet name="header">
                                                <h:outputText value="Id"/>
                                            </f:facet>

                                            <a4j:commandLink id="linkPro" action="# {homologacaoBean.editar}" value="# {linha.id}" render="idProf,idFuncao" oncomplete="fecharModal()">
                                                <a4j:param value="# {it.index}" assignTo="# {homologacaoBean.idIndexProf}" />
                                            </a4j:commandLink>
                                        </rich:column>

                                        <rich:column style="text-align: center;">
                                            <f:facet name="header">
                                                <h:outputText value="Cbo"/>
                                            </f:facet>
                                            <h:outputText  value="# {linha.cbo}"/>
                                        </rich:column>

                                        <rich:column style="text-align: center;">>
                                            <f:facet name="header">
                                                <h:outputText value="Profissão"/>
                                            </f:facet>
                                            <h:outputText  value="# {linha.profissao}"/>
                                        </rich:column>
                                    </rich:dataTable>
                                </h:panelGroup>
                            </h:panelGrid>

                        </center>
                    </div>
                    <div id="mask"></div>
                </div>   -->   
                <rich:popupPanel id="i_painel_mensagem" modal="true" resizeable="true" width="400" height="200" domElementAttachment="form" header="Mensagem">
                    <f:facet name="controls">
                        <h:outputLink value="#" onclick="#{rich:component('form_homologacao:i_painel_mensagem')}.hide(); return false;">
                            <a4j:ajax event="click"  />
                            <h:graphicImage value="/Imagens/iconExcluir.png" alt="Fechar"/>                            
                        </h:outputLink>
                    </f:facet>
                    <center>
                        <h:outputLabel value="#{homologacaoBean.msgConfirma}" />
                        <br /><br />
                        <a4j:commandButton value="OK" title="Ok" action="homologacao" />
                    </center>
                </rich:popupPanel>                 
            </h:form>
        </f:view>
    </h:body>
</ui:composition>