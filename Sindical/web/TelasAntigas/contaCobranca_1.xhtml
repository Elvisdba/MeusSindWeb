<ui:composition xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
    
    <h:head>
        <title>Conta Cobrança</title>
        <meta http-equiv="X-UA-Compatible" content="IE=9" />
    </h:head>
    <h:body class="divMenu">
        <f:subview id="header">
            <ui:include src="template.xhtml"/>
            <ui:include src="templateLinks.xhtml"/>
        </f:subview>
        <f:view>
            <h:form id="formContaCobranca">      
                <c:set scope="request" var="object" value="${contaCobrancaBean.contaCobranca}"/>
                <center>
                    <div class="headerPanel">
                        <h:outputText value="Conta Cobrança" styleClass="fontePanel" style="width: 100%;"/>
                    </div>
                </center>
                <div class="divMae" style="margin-bottom: 15px; float: left; width: 800px">
                    <div class="fontePadrao divFundo">
                        <h:panelGrid columns="2" columnClasses="coluna1, coluna2 ">
                            <h:column>
                                <h:commandButton id="idBanco" image="/Imagens/pesquisar.png" action="#{chamadaPaginaBean.contaBanco}" immediate="true" title="Pesquisa Conta Banco"/>
                            </h:column>
                            <h:column>
                                <h:outputLabel value="Pesquisar Conta Banco" title="Pesquisa Conta Banco" for="idBanco" rendered="#{(contaCobrancaBean.contaCobranca.contaBanco.banco.numero) == ''}"/>
                                <h:outputText value="Nº. #{contaCobrancaBean.contaCobranca.contaBanco.banco.numero} - 
                                                  Banco: #{contaCobrancaBean.contaCobranca.contaBanco.banco.banco} - 
                                                     Ag: #{contaCobrancaBean.contaCobranca.contaBanco.agencia} -
                                                  Conta: #{contaCobrancaBean.contaCobranca.contaBanco.conta}" styleClass="fontePadrao" rendered="#{(contaCobrancaBean.contaCobranca.contaBanco.banco.numero) != ''}"/>
                            </h:column>
                            <h:column><h:outputLabel value="Código do Cedente: " styleClass="fontePadrao" for="idCodigoCedente"/></h:column>
                            <h:column>
                                <h:inputText id="idCodigoCedente" value="#{contaCobrancaBean.contaCobranca.codCedente}" size="15" onblur="somenteNumeros(this);" maxlength="100" title="Código do Cedente">
                                    <a4j:ajax event="keyup" listener="#{contaCobrancaBean.preencheSicasECodSindical}" render="idSicas, idCodigoSindical"  />
                                </h:inputText>
                            </h:column>
                            <h:column><h:outputLabel value="Nome do Cedente: " styleClass="fontePadrao" for="idNomeCedente"/></h:column>
                            <h:column><h:inputTextarea style="height: 40px; width: 400px;" id="idNomeCedente" value="#{contaCobrancaBean.contaCobranca.cedente}" title="Nome do Cedente" styleClass="fontePadrao"/> </h:column>
                            <h:column><h:outputLabel value="Local do Pagamento: " styleClass="fontePadrao" for="idLocalPagto" /></h:column>
                            <h:column><h:inputText id="idLocalPagto" value="#{contaCobrancaBean.contaCobranca.localPagamento}" size="50" maxlength="100" title="Local do Pagamento"/></h:column>
                            <h:column><h:outputLabel value="Percentual Repasse: " styleClass="fontePadrao" for="idPercentualRepasse"/></h:column>
                            <h:column><h:inputText id="idPercentualRepasse" value="#{contaCobrancaBean.contaCobranca.repasse}" size="15" maxlength="100" title="Percentual de Repasse"/></h:column>
                            <h:column><h:outputLabel value="Boleto Inicial: " styleClass="fontePadrao" for="idBoletoInicial"/></h:column>
                            <h:column><h:inputText id="idBoletoInicial" value="#{contaCobrancaBean.contaCobranca.boletoInicial}" size="15" maxlength="100" title="Boleto Inicial"/></h:column>
                            <h:column><h:outputLabel value="Moeda: " styleClass="fontePadrao" for="idMoeda"/></h:column>
                            <h:column>
                                <h:inputText id="idMoeda" value="#{contaCobrancaBean.contaCobranca.moeda}" size="10" maxlength="50" title="Moeda"/>
                                <h:outputLabel value="Espécie Moeda: " styleClass="fontePadrao" for="idEspecieMoeda" />
                                <h:inputText id="idEspecieMoeda" value="#{contaCobrancaBean.contaCobranca.especieMoeda}" size="2" maxlength="2" title="Espécie Moeda" />
                                <h:outputLabel value="Espécie Documento: " styleClass="fontePadrao" for="idEspecieDocumento"/>
                                <h:inputText id="idEspecieDocumento" value="#{contaCobrancaBean.contaCobranca.especieDoc}" size="10" maxlength="50" title="Espécie Documento" />                                        
                            </h:column>
                            <h:column><h:outputLabel value="Carteira: " styleClass="fontePadrao" for="idCarteira"/></h:column>
                            <h:column>
                                <h:inputText id="idCarteira" value="#{contaCobrancaBean.contaCobranca.carteira}" size="10" maxlength="50" title="Carteira" />
                                <h:outputLabel value="Aceite: " styleClass="fontePadrao" for="idAceite"/>
                                <h:inputText id="idAceite" value="#{contaCobrancaBean.contaCobranca.aceite}" size="5" maxlength="5" title="Aceite" />
                                <h:outputLabel value="Layout: " styleClass="fontePadrao" for="idLayout"/>
                                <h:selectOneMenu value="#{contaCobrancaBean.idLayout}" styleClass="fontePadrao" title="Tipo de Layout do Boleto (Consultar modelos de layout)">
                                    <a4j:ajax event="change" render="this"/>
                                    <f:selectItems value="#{contaCobrancaBean.listaLayout}" />
                                </h:selectOneMenu>                                        
                            </h:column>
                        </h:panelGrid>
                        <h:panelGrid columns="1" columnClasses="coluna1">
                            <h:column>
                                <p style="text-align: left; margin-top: 15px; padding: 5px; background: white" class="fontePadrao divFundo">Cobrança Sindical</p>
                            </h:column>
                            <h:column>                                
                                <div class="fontePadrao divFundo" style="background: white; margin: 0; width: 880px; border: 1px solid #d4d5d7 ">
                                    <h:outputLabel value="Categoria: " for="idCategoria" />
                                    <h:inputText id="idCategoria" value="#{contaCobrancaBean.contaCobranca.categoriaSindical}" maxlength="1" size="1" onblur="somenteNumeros(this);" title="Categoria" styleClass="fontePadrao" style="text-align: center;"/>
                                    <h:outputLabel value="Arrecadação: " for="idArrecadacao"/>
                                    <h:inputText id="idArrecadacao" value="#{contaCobrancaBean.contaCobranca.arrecadacaoSindical}" maxlength="1" size="1" onblur="somenteNumeros(this);" title="Arrecadação Sindical" styleClass="fontePadrao" style="text-align: center;"/>
                                    <h:outputLabel value="Febraban: " for="idFebraban"/>
                                    <h:inputText id="idFebraban" value="#{contaCobrancaBean.contaCobranca.febranSindical}" maxlength="4" size="2" onblur="somenteNumeros(this);" title="Febraban (Código da Federeção Brasileira de Bancos (Febraban)" styleClass="fontePadrao" style="text-align: center;"/>
                                    <h:outputLabel value="Segmento: " for="idSegmento"/>
                                    <h:inputText id="idSegmento" value="#{contaCobrancaBean.contaCobranca.segmentoSindical}" maxlength="1" size="1" onblur="somenteNumeros(this);" title="Segmento Sindical" styleClass="fontePadrao" style="text-align: center;"/>
                                    <h:outputLabel value="Sicas: " for="idSicas"/>
                                    <h:inputText id="idSicas" value="#{contaCobrancaBean.sicas}" maxlength="5" size="4" onblur="somenteNumeros(this);" title="Sicas Sindical" readonly="true" styleClass="fontePadrao" style="text-align: center;" />
                                    <h:outputLabel value="Código Sindical: " for="idCodigoSindical"/>
                                    <h:inputText id="idCodigoSindical" value="#{contaCobrancaBean.codigoCedente}" maxlength="50" size="20" onblur="somenteNumeros(this);" title="Código Sindical" styleClass="fontePadrao"/>
                                </div>                                        
                            </h:column>
                            <h:column>
                                <p style="text-align: left; margin-top: 15px; padding: 5px; font-style: italic; font-size: 12px; background: white;" class="fontePadrao divFundo">* Categorias Sindicais: Patronal (1); Empregados (2); Profissionais Liberais (3); Autônomo (4); Governamental (5).</p>
                            </h:column>
                        </h:panelGrid>    
                        <h:panelGrid columns="3" columnClasses="coluna1">
                            <h:column>
                                <h:outputLabel value="Caminho Arquivo" />
                                <h:inputText value="#{contaCobrancaBean.contaCobranca.caminhoRetorno}" title="Caminho do Arquivo" styleClass="fontePadrao" style="margin-right: 20px"/>
                            </h:column>
                            <h:column>
                                <h:outputLabel value="Nome Serviço" />
                                <h:inputText value="#{contaCobrancaBean.contaCobranca.apelido}" title="Caminho do Arquivo" styleClass="fontePadrao" style="margin-right: 20px"/>
                            </h:column>
                            <h:column>
                                <h:selectBooleanCheckbox id="ichk_ativa" value="#{contaCobrancaBean.contaCobranca.ativo}" title="Ativar ou Desativar conta cobrança" style="margin-left: 20px" />
                                <h:outputLabel value="Habilitado para baixar" for="ichk_ativa" style="cursor: pointer"/>
                            </h:column>
                        </h:panelGrid>
                    </div>
                </div>
                <div class="clear"></div>
                <div class="divMae" style="margin-top: 15px;">
                    <div>
                        <a4j:commandLink onclick="modalOpcao('divSalvar');" styleClass="idSalvar iLink" value="Salvar" disabled="#{controleAcessoBean.botaoSalvar}" title="Salvar"/>
                        <a4j:commandLink styleClass="iLink idNovo" value="Novo" action="#{contaCobrancaBean.novo}" title="Novo"/>
                        <a4j:commandLink onclick="modalOpcao('divExcluir');" styleClass="idExcluir iLink" value="Excluir" disabled="#{controleAcessoBean.botaoExcluir}" title="Excluir"/>
                        <a4j:commandLink styleClass="iLink idPesquisar" value="Pesquisar" action="#{chamadaPaginaBean.pesquisaContaCobranca}" title="Pesquisar"/>
                    </div>
                </div>                
                <div id="boxes">
                    <div id="divSalvar" class="window">
                        <a4j:commandLink styleClass="close closeModal" title="Fechar">
                            <h:graphicImage value="/Imagens/iconExcluir.png" alt="Fechar"/>
                        </a4j:commandLink>
                        <br />
                        <center>
                            <h:panelGrid columns="2">
                                <h:outputText value="Deseja salvar esta Conta Cobrança?" styleClass="fontePadrao"/>
                                <a4j:status><f:facet name="start"><h:graphicImage value="/Imagens/espere.gif" alt="Salvando"/></f:facet></a4j:status>
                            </h:panelGrid>

                            <br />
                            <a4j:commandLink styleClass="idNovo iLink" value="Sim" title="Salvar" action="#{contaCobrancaBean.salvar}" oncomplete="modalMensagem()" render="outConfirma"/>
                            <a4j:commandLink styleClass="idNovo iLink closeModal" value="Não" title="Cancelar"/>
                        </center>
                    </div>
                    <div id="mask"></div>
                </div>
                <div id="boxes">
                    <div id="divExcluir" class="window">
                        <a4j:commandLink styleClass="close closeModal" title="Fechar">
                            <h:graphicImage value="/Imagens/iconExcluir.png" alt="Fechar"/>
                        </a4j:commandLink>
                        <br />
                        <center>
                            <h:panelGrid columns="2">
                                <h:outputText value="Deseja excluir esta Conta Cobrança?" styleClass="fontePadrao"/>
                                <a4j:status><f:facet name="start"><h:graphicImage value="/Imagens/espere.gif" alt="Excluindo"/></f:facet></a4j:status>
                            </h:panelGrid>
                            <br />
                            <a4j:commandLink styleClass="idNovo iLink" value="Sim" title="Salvar" action="#{contaCobrancaBean.excluir}" oncomplete="modalMensagem()" render="outConfirma"/>
                            <a4j:commandLink styleClass="idNovo iLink closeModal" value="Não" title="Cancelar"/>
                        </center>
                    </div>
                    <div id="mask"></div>
                </div>
                <div id="boxes">
                    <div id="divMensagem" class="window">
                        <a4j:commandLink styleClass="close closeModal" title="Fechar">
                            <h:graphicImage value="/Imagens/iconExcluir.png" alt="Fechar"/>
                        </a4j:commandLink>
                        <br />
                        <center>
                            <h:outputText id="outConfirma" value="#{contaCobrancaBean.msgConfirma}" styleClass="fontePadrao"/>
                            <br /><br />
                            <a4j:commandLink styleClass="idNovo iLink closeModal" value="OK" title="OK" action="#{contaCobrancaBean.limpar}" render="formContaCobranca, tbl"/>
                        </center>
                    </div>
                    <div id="mask"></div>
                </div>                    
            </h:form>            
        </f:view>
    </h:body>
</ui:composition>