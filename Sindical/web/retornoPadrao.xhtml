<ui:composition xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
    <h:head>
        <title>Retorno Padrao</title>
        <meta http-equiv="X-UA-Compatible" content="IE=9" />
        <f:verbatim escape="true">
            <script type="text/javascript">
                function excluirArquivo(){
                    document.applets[0].excluirArquivo();
                }
                
                //<![CDATA[
                function lerArquivo(){
                    document.applets[0].lerArquivo();
                    for (var i = 0; i < #{retornoPadraoBean.listaCaminho.size()}; i++){
                        for (var w = 0; w < 3; w++){
                            var qnt = document.applets[0].listaConteudo[i][w][0];
                            
                            if (qnt !== null){
                                //alert (document.applets[0].listaConteudo[i][w][1]);
                                //document.getElementById('formRetornoPadrao:id_ds_arq'+i+w).value = document.applets[0].listaConteudo[i][w][1];
                                //# {retornoPadraoBean.listaConteudo.add(document.applets[0].listaConteudo[i][w][1]) };
                                var n_arquivo = document.applets[0].listaConteudo[i][w][1];
                                ${retornoPadraoBean.listaTeste.add("Cara")};
                                
                                //document.getElementById('formRetornoPadrao:id_text'+i+w).value = document.applets[0].listaConteudo[i][w][2];
                                //# {retornoPadraoBean.listaTeste.add(document.applets[0].listaConteudo[i][w][2])};
                                //alert (document.applets[0].listaConteudo[i][w][2]);
                            }
                            
                        }
                    }
                    return true;
                }
                //]]>
            </script>
        </f:verbatim>
    </h:head>
    <h:body class="divMenu">
        <f:subview id="header">
            <ui:include src="templates/template.xhtml"/>
            <ui:include src="templates/templateLinks.xhtml"/>
        </f:subview>
        <f:view>
            <h:form id="formRetornoPadrao">
                <div class="divMae divFundo" style="text-align: center; width: 400px">
                    <h:panelGrid id="lista_caminho" columns="20">
                        <h:outputLabel value="Contribuição: " styleClass="fontePadrao"/>
                        <h:selectBooleanCheckbox id="ck_todos" value="#{retornoPadraoBean.ckTodos}">
                            <a4j:ajax event="change" render="@this lista_caminho p_text" listener="#{retornoPadraoBean.atualizaLista()}" />
                        </h:selectBooleanCheckbox>
                        <h:outputLabel value="Todos" for="ck_todos" style="cursor: pointer"/>
                        <c:forEach items="#{retornoPadraoBean.listaCaminho}" var="linha">
                            <h:selectBooleanCheckbox id="ck_#{linha.argumento0}" value="#{linha.argumento3}">
                                <a4j:ajax event="change" render="@this lista_caminho p_text"/>
                            </h:selectBooleanCheckbox>
                            <h:outputLabel value="#{linha.argumento2.apelido}" for="ck_#{linha.argumento0}" style="cursor: pointer"/>
                        </c:forEach>
                    </h:panelGrid>
                    
                    <h:panelGroup id="id_p_applet">
                        <applet id="applet0" code="x_applet.class" width="1" height="1" codebase=".">
                            <c:forEach items="#{retornoPadraoBean.listaCaminho}" var="linha">
                                <param name="caminho${linha.argumento0}" value="${linha.argumento1}" />
                            </c:forEach>
                        </applet>
                    </h:panelGroup>

                    <h:commandLink value="Ler Pasta com Arquivos" onclick="lerArquivo();" />

                    <h:panelGrid id="p_text">
                        <c:forEach items="#{retornoPadraoBean.listaCaminho}" var="linha">
                            <h:outputLabel value="#{linha.argumento2.apelido}" rendered="#{linha.argumento3}"/>

                        </c:forEach>
                    </h:panelGrid>
                    <c:forEach items="#{retornoPadraoBean.listaTeste}" var="linha">
                        <h:outputLabel value="#{linha}" />
                   </c:forEach>
                        
                    <h:commandLink value="Baixar Retorno" action="#{retornoPadraoBean.enviarArquivoBaixar(false)}" />
                    <h:commandLink value="Excluir meus Arquivos" onclick="excluirArquivo();" style="margin-left: 40px;"/>
                    <h:outputLabel value="#{retornoPadraoBean.msgConfirma}" />
                </div>
            </h:form>
        </f:view>
    </h:body>
</ui:composition>